"use strict";function _asyncToGenerator(t){return function(){var r=t.apply(this,arguments);return new Promise(function(t,e){function o(n,c){try{var i=r[n](c),a=i.value}catch(t){return void e(t)}if(!i.done)return Promise.resolve(a).then(function(t){o("next",t)},function(t){o("throw",t)});t(a)}return o("next")})}}function buildArray(){bcp.init()}function clickedCountry(t){console.log("clicked country");for(var r=$(this).offsetParent().find("ul"),e=t.currentTarget.parentElement,o=$(e).find("ul"),n=0;n<r.length;n++)r[n]!==o[0]&&($(o[0]).hasClass("left")&&n++,$(r[n]).removeClass("mobile-open"));o.toggleClass("mobile-open")}function checkSize(){if("95%"==$("#locationModal").css("min-width"))for(var t=0;t<continentButton.length;t++)continentButton[t].addEventListener("click",clickedCountry,!1);else for(var t=0;t<continentButton.length;t++)continentButton[t].removeEventListener("click",clickedCountry,!1)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},countriesUrl="https://codepen.io/theller5567/pen/pLMayr.js",distributorsUrl="https://codepen.io/theller5567/pen/JvdBKB.js",bcp={countriesLoaded:!1,distributorsLoaded:!1,openClose:!1,getUrl:function t(){return window.location.origin},init:function t(){bcp.topbar=parseInt($(".top-bar").css("height"),10),bcp.bottombar=parseInt($(".bottom-bar").css("height"),10),bcp.countriesLoaded?bcp.addEventListeners():bcp.addCountries().then(function(t){bcp.popup=$($.fancybox.getInstance().current.src)[0],bcp.distributorArrays(t)})},toggleCountrySection:function t(){$("#locationModal").find(".loading").toggleClass("open"),$(".content").toggle()},getCountries:function t(){return console.log("get Countriess"),bcp.toggleCountrySection(),new Promise(function(t){setTimeout(function(){$.ajax({url:countriesUrl,success:function r(e){var o=JSON.parse(e);t(o)}})},1500)})},addCountries:function(){function t(){return r.apply(this,arguments)}var r=_asyncToGenerator(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function t(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bcp.getCountries();case 2:return r=e.sent,bcp.toggleCountrySection(),bcp.countriesLoaded=!0,e.abrupt("return",r);case 6:case"end":return e.stop()}},t,this)}));return t}(),getDistributors:function t(){return console.log("Get Distributors"),bcp.toggleCountrySection(),new Promise(function(t){setTimeout(function(){$.ajax({url:distributorsUrl,success:function r(e){var o=JSON.parse(e);t(bcp.parseDistributors(o))},error:function t(r){console.log("error",r)}})},1500)})},addDistributors:function(){function t(){return r.apply(this,arguments)}var r=_asyncToGenerator(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function t(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bcp.getDistributors();case 2:r=e.sent,bcp.distributorsLoaded=!0,console.log(r),$("#distributorSection").append(r);case 6:case"end":return e.stop()}},t,this)}));return t}(),parseDistributors:function t(r){var e="<h3>"+localStorage.getItem("countryName")+"</h3>";return e+="<ul class='distributor-list'>",r.forEach(function(t,r){console.log(t.distributor_title+r),e+="<li class='distributor'>",e+="<h4>"+t.distributor_title+"</h4>",e+="<p><span>Phone</span>: "+t.contact_number+"</p>",e+="<address>",e+="<p><span>Address:</span> "+t.address+"</p>",e+="<address>",e+="<a href='"+t.website+"'>"+t.website+"</a>",e+="</li>"}),e+="</ul>"},popupHeight:0,countryArrays:{europeArr:[],europeArr1:[],europeArr2:[],namericaArr:[],samericaArr:[],otherArr:[],apacificArr:[]},distributorArrays:function t(r){bcp.numDistributors=r,bcp.numDistributors.forEach(function(t){var r="europe"===t.distributorRegion,e="north america"===t.distributorRegion,o="south america"===t.distributorRegion,n="other"===t.distributorRegion,c="asia/pacific"===t.distributorRegion;return r&&bcp.countryArrays.europeArr.push(t),e&&bcp.countryArrays.namericaArr.push(t),o&&bcp.countryArrays.samericaArr.push(t),n&&bcp.countryArrays.otherArr.push(t),c&&bcp.countryArrays.apacificArr.push(t),bcp.countryArrays}),bcp.sortCountries(),bcp.splitEurope()},splitEurope:function t(){var r=0;if(bcp.countryArrays.europeArr.length){var e=bcp.countryArrays.europeArr.length;bcp.countryArrays.europeArr.forEach(function(t){r<=e/2?(bcp.countryArrays.europeArr1.push(t),r++):r>e/2&&bcp.countryArrays.europeArr2.push(t)})}bcp.buildList()},sortCountries:function t(){var r=bcp.countryArrays,e=0,o;for(o in r)r.hasOwnProperty(o)&&e++;var n=$(r).length;if(e)for(var o=0;o<e;o++){var c=Object.keys(r)[o];r[c].sort(function(t,r){return t.country<r.country?-1:t.country>r.country?1:0})}return r},titleCase:function t(r){return r.charAt(0).toUpperCase()+r.slice(1)},createList:function t(r){var e=r,o=e.countryCode,n=o.toUpperCase(),c=bcp.titleCase(e.country),i=n+" "+c;if(n){if("US"===n){var a='<li class="country"><a class="highlight-country" href="#" alt="'+i+'">'+c+"</a></li>";return a}var a='<li class="country"><a href="#" alt="'+i+'">'+c+"</a></li>";return a}},getCountryData:function t(){var r=$(this).children().attr("alt"),e=r.substr(0,r.indexOf(" "));console.log(e);var o=r.substr(r.indexOf(" ")+1);$("#dataCountry").val(e),$("#dataCountryName").val(o),localStorage.setItem("countryCode",e),localStorage.setItem("countryName",o);var n={countryCode:e,countryName:o};console.log("test: ",e),"US"===e||"CA"===e?(bcp.closeModule(),alert('United States and Canada\'s  Distributor is set by default and covered by "Company Name"')):(bcp.toggleScreen(),bcp.buildDistributors(n))},removeEventListeners:function t(){for(var r=$("li.country"),e=$(".go-back"),o=0;o<r.length;o++)r[o].removeEventListener("click",bcp.getCountryData,!1);for(var o=0;o<e.length;o++)e[o].addEventListener("click",bcp.goBack,!1)},addEventListeners:function t(){$(".fancybox-inner").css({height:"auto",minHeight:"430px"});var r=$("li.country"),e=$(".go-back");console.log("countries",r);for(var o=0;o<r.length;o++)r[o].addEventListener("click",bcp.getCountryData,!1);for(var o=0;o<e.length;o++)e[o].addEventListener("click",bcp.goBack,!1)},goBack:function t(){if(bcp.distributorsLoaded){bcp.toggleScreen();var r=bcp.bottombar+bcp.bottombar+parseInt($("#countrySection").css("height"),10)+"px";$(bcp.popup).css("height",r)}},toggleScreen:function t(){$("#countrySection").toggleClass("close"),$("#distributorSection").toggleClass("open"),$(".selectCountry").toggleClass("close"),$(".selectDistributor").toggleClass("close"),$(".remember-me").toggleClass("close"),$(".distributor-bar").toggleClass("open")},buildDistributors:function t(r){var e=r.countryName;$(".go-back").prop("disabled",!0),$("#distributorSection").empty(),bcp.addDistributors().then(function(t){var e=$("#distributorSection").height();$(".go-back").prop("disabled",!1),$("#locationModal").height(e+110),bcp.toggleCountrySection(),bcp.clickedDistributor(r)})},clickedDistributor:function t(r){$(".distributor-list").find("li").on("click",function(t){t=$(t.currentTarget);var e=t.find("h4")[0].innerText;localStorage.setItem("distributorName",e),localStorage.setItem("countryCode",r.countryCode),localStorage.setItem("countryName",r.countryName),$(".go-back").click(),bcp.closeModule()})},closeModule:function t(){$.fancybox.destroy(),bcp.removeEventListeners()},buildList:function t(){var r=$(".europe").find(".left"),e=$(".europe").find(".right"),o=$(".north_america").find("ul"),n=$(".south_america").find("ul"),c=$(".other").find("ul"),i=$(".asia_pacific").find("ul");bcp.countryArrays.europeArr.length&&(bcp.countryArrays.europeArr1.forEach(function(t){r.append(bcp.createList(t))}),bcp.countryArrays.europeArr2.forEach(function(t){e.append(bcp.createList(t))})),bcp.countryArrays.namericaArr.length&&bcp.countryArrays.namericaArr.forEach(function(t){o.append(bcp.createList(t))}),bcp.countryArrays.samericaArr.length&&bcp.countryArrays.samericaArr.forEach(function(t){n.append(bcp.createList(t))}),bcp.countryArrays.otherArr.length&&bcp.countryArrays.otherArr.forEach(function(t){c.append(bcp.createList(t))}),bcp.countryArrays.apacificArr.length&&bcp.countryArrays.apacificArr.forEach(function(t){i.append(bcp.createList(t))}),bcp.countriesLoaded=!0,bcp.popupHeight=$(bcp.popup).css("height"),bcp.addEventListeners()}},continentButton=$(".continent"),timeout=!1,delay=250;checkSize(),window.addEventListener("resize",function(){clearTimeout(t);var t=setTimeout(checkSize,delay)}),$(".distributor-selector").on("click",function(t){$.fancybox.open({src:"#locationModal",type:"inline",opts:{smallBtn:!1,toolbar:!1,clickSlide:!1,clickOutside:!1,infobar:!1,touch:{vertical:!1,momentum:!1},beforeLoad:function t(r,e){if("object"===("undefined"==typeof localStorage?"undefined":_typeof(localStorage)))try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage"),buildArray()}catch(t){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){},console.log('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.')}}}})});